<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no", viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="×¨×©×™××ª ×§× ×™×•×ª">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#97CFB0">

  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="preload" as="image" href="icons/Background.svg">
  <link rel="preload" as="image" href="icons/logo.svg">

  <!-- âœ… Full iOS Splash Screen Set (portrait + landscape) -->

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-640-1136.jpg"
  media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1136-640.jpg"
  media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-750-1334.jpg"
  media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1334-750.jpg"
  media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1242-2208.jpg"
  media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2208-1242.jpg"
  media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1125-2436.jpg"
  media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2436-1125.jpg"
  media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1170-2532.jpg"
  media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2532-1170.jpg"
  media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1179-2556.jpg"
  media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2556-1179.jpg"
  media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1284-2778.jpg"
  media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2778-1284.jpg"
  media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1290-2796.jpg"
  media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2796-1290.jpg"
  media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">

<!-- iPads -->
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1536-2048.jpg"
  media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2048-1536.jpg"
  media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1668-2224.jpg"
  media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2224-1668.jpg"
  media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1668-2388.jpg"
  media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2388-1668.jpg"
  media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2048-2732.jpg"
  media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2732-2048.jpg"
  media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-1640-2360.jpg"
  media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/icons/splash/apple-splash-2360-1640.jpg"
  media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

<style>
  :root {
    /* ×¢×¨×›×™× ×”×ª×—×œ×ª×™×™× ×œ×¤× ×™ ×©×”-JS ××•×“×“ ××©×”×• */
    --status-bg: #97CFB0;
    --header-bg: #97CFB0;
    --body-bg: #97CFB0;
    --sticky-h: 140px;       /* ×’×•×‘×” ××©×•×¢×¨ ×©×œ ×”×”××“×¨ */
    --bottom-bar-h: 58px;    /* ×›××• ×©×”×’×“×¨×ª ×œ×¡×¨×’×œ ×”×ª×—×ª×•×Ÿ */
  }

  html {
    background: var(--status-bg);
  }

  body {
    margin: 0;
    font-family: -apple-system, system-ui, sans-serif;
    background: var(--body-bg);
    overflow: hidden;
  }

  #app-wrapper {
    display: grid;
    grid-template-rows: auto 1fr;
    grid-template-columns: 100%;
    height: 100vh;
    overflow: hidden;
  }
  @supports (height: 100dvh) {
    #app-wrapper {
      height: 100dvh;
    }
  }

  #sticky-header-container {
    background: var(--header-bg);
  }

  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    padding-top: calc(20px + env(safe-area-inset-top));
    box-sizing: border-box;
  }

  #shopping-list-container {
    height: calc(100vh - var(--sticky-h));
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  @supports (height: 100dvh) {
    #shopping-list-container {
      height: calc(100dvh - var(--sticky-h));
    }
  }

  /* ×©×”××–×•×¨ ×©×œ ×”× ×•×¥â€™ ×™×”×™×” ×‘×¦×‘×¢ ×”× ×›×•×Ÿ ×™×©×¨ ××”×¤×¨×™×™× ×”×¨××©×•×Ÿ */
  @supports (padding: env(safe-area-inset-top)) {
    html { background: var(--status-bg); }
  }
</style>


  <link rel="stylesheet" href="style.css">
  <title>×¨×©×™××ª ×§× ×™×•×ª ×¡×•×¤×¨××¨×§×˜</title>
</head>

<body>
  <div id="html-splash">
  </div>

  <div id="app-wrapper">
    <div id="sticky-header-container">
      <header class="header">
        <h1>×¨×©×™××ª ×§× ×™×•×ª</h1>
        <ion-icon name="share-outline" id="share-icon"></ion-icon>
      </header>
      <div class="category-filter-container">
        <div class="category-filter-wrapper"></div>
      </div>
    </div>
<div id="cat-fade-overlay" aria-hidden="true"></div>
    <div id="shopping-list-container"></div>
    
     <nav id="bottom-bar" class="hidden" role="navigation" aria-label="×¡×¨×’×œ ×ª×—×ª×•×Ÿ">
    <button class="tab-btn" id="btn-login" type="button" aria-label="×”×ª×—×‘×¨×•×ª">
      <ion-icon name="person-outline" aria-hidden="true"></ion-icon>
      <span>×”×ª×—×‘×¨×•×ª</span>
    </button>

    <button class="tab-btn" id="btn-my-lists" type="button" aria-label="×”×¨×©×™××•×ª ×©×œ×™">
      <ion-icon name="list-outline" aria-hidden="true"></ion-icon>
      <span>×”×¨×©×™××•×ª ×©×œ×™</span>
    </button>

    <button class="tab-btn" id="btn-reset" type="button" aria-label="××™×¤×•×¡ ×‘×—×™×¨×”">
      <ion-icon name="refresh-outline" aria-hidden="true"></ion-icon>
      <span>××™×¤×•×¡</span>
    </button>

    <button class="tab-btn" id="btn-share" type="button" aria-label="×©×™×ª×•×£">
      <ion-icon name="share-outline" aria-hidden="true"></ion-icon>
      <span>×©×™×ª×•×£</span>
    </button>
  </nav>
  </div>


<!-- ===== Auth Sheet (Login / Signup) ===== -->
<div id="auth-backdrop" class="auth-backdrop hidden"></div>
<div id="auth-sheet" class="auth-sheet hidden" aria-hidden="true">
  <div class="auth-title">×”×ª×—×‘×¨×•×ª ×œ×¨×©×™××ª ×”×§× ×™×•×ª</div>

  <form id="auth-form" class="auth-form">
    <label class="auth-label">
      ×›×ª×•×‘×ª ××™××™×™×œ
      <input type="email" id="auth-email" required autocomplete="email" />
    </label>

    <label class="auth-label">
      ×¡×™×¡××”
      <input type="password" id="auth-password" required autocomplete="current-password" />
    </label>

    <div class="auth-actions">
      <button type="submit" class="auth-primary-btn" id="auth-submit-btn">
        ×”×ª×—×‘×¨×•×ª
      </button>
      <button type="button" class="auth-secondary-btn" id="auth-toggle-mode">
        ××™×Ÿ ×œ×š ××©×ª××©? ×”×¨×©×
      </button>
    </div>
  </form>

  <button type="button" class="auth-cancel-btn" id="auth-cancel">×‘×™×˜×•×œ</button>

  <div class="auth-status" id="auth-status" aria-live="polite"></div>
</div>

<!-- ===== User Menu Sheet ===== -->
<div id="user-menu-backdrop" class="user-menu-backdrop hidden"></div>

<div id="user-menu" class="user-menu hidden" role="dialog" aria-modal="true" aria-labelledby="user-menu-title">
   <!-- âœ… ×™×“×™×ª ×’×¨×™×¨×” -->
  <div class="sheet-handle" data-sheet-handle></div>

  <div class="user-menu-title" id="user-menu-title">
    ×¤×¨×˜×™ ××©×ª××©
  </div>

  <div class="user-menu-email" id="user-menu-email">
    ×œ× ××—×•×‘×¨
  </div>

  <div class="user-menu-actions">
    <button type="button" class="user-menu-btn" id="user-merge-btn">
       ××™×—×•×“ ×¨×©×™××•×ª 
    </button>

    <button type="button" class="user-menu-btn user-menu-btn-danger" id="user-disconnect-btn" disabled>
      ğŸ”— ×©×‘×™×¨×ª ×—×™×‘×•×¨ ××¨×©×™××” ××©×•×ª×¤×ª
    </button>

    <button type="button" class="user-menu-btn" id="user-logout-btn">
       ×”×ª× ×ª×§×•×ª
    </button>
  </div>

</div>

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

<script type="module" src="script.js"></script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/ShoppingList-0.2/sw.js', { scope: '/ShoppingList-0.2/' })
    .then(reg => console.log('âœ… SW registered:', reg.scope))
    .catch(err => console.error('âŒ SW registration failed:', err));
}
</script>

</body>
</html>
